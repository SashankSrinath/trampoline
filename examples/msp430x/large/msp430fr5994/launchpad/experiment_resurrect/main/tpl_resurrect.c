/**
 * @file tpl_resurrect.c
 *
 * @section desc File description
 *
 * OS data structure generated from application base
 * Automatically generated by goil on Wed Jul 19 10:15:36 2023
 * from root OIL file main.oil
 *
 * @section copyright Copyright
 *
 * Trampoline OS
 *
 * Trampoline is copyright (c) IRCCyN 2005-2007
 * Trampoline is protected by the French intellectual property law.
 *
 * This software is distributed under the Lesser GNU Public Licence
 *
 * @section infos File informations
 *
 * $Date$
 * $Rev$
 * $Author$
 * $URL$
 */

#include <stdbool.h>
#include <stdint.h>

#include "tpl_os_internal_types.h"
#include "tpl_resurrect_kernel.h"
#include "tpl_os_definitions.h"

#include "tpl_os.h"


extern void transistor_on(void);

#define APP_COMMON_START_SEC_CODE
#include "tpl_memmap.h"

FUNC(void, OS_APPL_CODE) transistor_on_entry (void){   
     //initMicrophone();
    transistor_on();
    TerminateStepResurrect();
}

#define APP_COMMON_STOP_SEC_CODE
#include "tpl_memmap.h"

#define OS_START_SEC_CONST_UNSPECIFIED
#include "tpl_memmap.h"

CONST(tpl_step, OS_CONST) step_E0_E0 = {
  .energy = 2100
, .to_state = 0
, .from_state = 0
, .entry_point = transistor_on_entry
};

#define OS_STOP_SEC_CONST_UNSPECIFIED
#include "tpl_memmap.h"


/**
 * @internal
 *
 * tpl_kern_resurrect gather informations on the current step and
 * the state
 */
VAR(tpl_kern_resurrect_state, OS_VAR) tpl_kern_resurrect =
{
  NULL,                      /* no elected step   */
  0,                         /* current state is STATE with INITIAL_STATE = TRUE */  
};

#define OS_START_SEC_CONST_UNSPECIFIED
#include "tpl_memmap.h"

CONSTP2VAR(tpl_step, AUTOMATIC, OS_APPL_DATA) step_from_state_E0 [1] = {
&step_E0_E0};

CONSTP2CONST(tpl_step_ref, AUTOMATIC, OS_APPL_DATA) tpl_step_state [RESURRECT_STATE_COUNT] = {
step_from_state_E0
};

#define OS_STOP_SEC_CONST_UNSPECIFIED
#include "tpl_memmap.h"
